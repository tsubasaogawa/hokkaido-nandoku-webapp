<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <!-- Styles -->
  <style>
    .box { fill: #f9f9f9; stroke: #333; stroke-width: 2; }
    .aws-box { fill: #FF9900; stroke: #b06a00; stroke-width: 2; }
    .ext-box { fill: #e0e0e0; stroke: #666; stroke-width: 2; }
    .text { font-family: sans-serif; font-size: 14px; text-anchor: middle; fill: #333; }
    .title { font-family: sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle; fill: #333; }
    .label { font-family: sans-serif; font-size: 12px; fill: #555; background-color: white; }
    .arrow { stroke: #333; stroke-width: 2; marker-end: url(#arrowhead); }
    .dashed { stroke-dasharray: 5,5; }
  </style>
  
  <!-- Arrowhead definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="30" class="title">Hokkaido Nandoku Webapp - System Architecture</text>

  <!-- User -->
  <rect x="20" y="200" width="100" height="60" rx="5" class="box" />
  <text x="70" y="235" class="text">User</text>
  <text x="70" y="290" class="text">(Browser)</text>

  <!-- AWS Cloud Boundary -->
  <rect x="140" y="60" width="480" height="400" rx="10" fill="none" stroke="#FF9900" stroke-width="2" stroke-dasharray="10,5" />
  <text x="190" y="85" class="label" fill="#FF9900" font-weight="bold">AWS Cloud</text>

  <!-- CloudFront -->
  <rect x="160" y="200" width="100" height="60" rx="5" class="aws-box" fill="#FFC870" />
  <text x="210" y="235" class="text">CloudFront</text>

  <!-- API Gateway -->
  <rect x="300" y="200" width="100" height="60" rx="5" class="aws-box" fill="#D494FF" stroke="#8C4FFF" />
  <text x="350" y="225" class="text">API Gateway</text>
  <text x="350" y="245" class="text">(HTTP API)</text>

  <!-- Lambda Function (FastAPI) -->
  <rect x="450" y="180" width="140" height="100" rx="5" class="aws-box" />
  <text x="520" y="215" class="text">AWS Lambda</text>
  <text x="520" y="235" class="text">(FastAPI / Python 3.13)</text>
  <text x="520" y="255" class="text">hokkaido-nandoku-quiz</text>

  <!-- DynamoDB -->
  <rect x="450" y="350" width="140" height="60" rx="5" class="aws-box" fill="#3D55CE" stroke="#25337A" />
  <text x="520" y="380" class="text" fill="white" style="fill: white;">Amazon DynamoDB</text>
  <text x="520" y="400" class="text" fill="#eee" style="fill: #eee; font-size: 10px;">(Cache Options)</text>

  <!-- Bedrock -->
  <rect x="450" y="80" width="140" height="60" rx="5" class="aws-box" fill="#2EBC9D" stroke="#1D7562" />
  <text x="520" y="110" class="text" fill="white" style="fill: white;">Amazon Bedrock</text>
  
  <!-- External API -->
  <rect x="660" y="200" width="120" height="60" rx="5" class="ext-box" />
  <text x="720" y="225" class="text">External API</text>
  <text x="720" y="245" class="text">(Quiz Data)</text>

  <!-- Connections -->
  
  <!-- User to CloudFront -->
  <line x1="120" y1="230" x2="150" y2="230" class="arrow" />
  <text x="135" y="220" class="label" font-size="10px">HTTPS</text>

  <!-- CloudFront to API Gateway -->
  <line x1="260" y1="230" x2="290" y2="230" class="arrow" />
  <text x="275" y="220" class="label" font-size="10px">HTTPS</text>

  <!-- API Gateway to Lambda -->
  <line x1="400" y1="230" x2="440" y2="230" class="arrow" />

  <!-- Lambda to Bedrock -->
  <line x1="520" y1="180" x2="520" y2="150" class="arrow" />
  <text x="530" y="170" class="label" font-size="10px">Gen AI (Cache miss)</text>

  <!-- Lambda to DynamoDB -->
  <line x1="520" y1="280" x2="520" y2="340" class="arrow" />
  <text x="530" y="320" class="label" font-size="10px">Get/Put Cache</text>

  <!-- Lambda to External API -->
  <line x1="590" y1="230" x2="650" y2="230" class="arrow" />
  <text x="625" y="220" class="label" font-size="10px">Fetch City</text>

</svg>